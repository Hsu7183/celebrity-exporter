:root{
  --bg:#f5f6f8; --card:#fff; --muted:#737373; --border:#e5e7eb;
  --primary:#2563eb; --primary-600:#1e40af;
}

*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);font-family:system-ui,-apple-system,"Segoe UI",sans-serif;color:#111}

header,.container{max-width:1200px;margin:0 auto;padding:14px}

h1{margin:6px 0 10px;font-size:24px;letter-spacing:.02em}
h2{margin:12px 0 8px;font-size:18px}
small, .muted{color:var(--muted)}

.btn{
  appearance:none;border:0;border-radius:10px;padding:8px 14px;
  background:var(--primary);color:#fff;font-weight:600;cursor:pointer
}
.btn.secondary{background:#eef2ff;color:#1e1e1e}
.btn:hover{background:var(--primary-600)}

.row{display:grid;gap:14px}
.row-2{grid-template-columns:1.2fr .8fr}

.card{
  background:var(--card);border:1px solid var(--border);border-radius:12px;padding:12px
}

.chart-wrap{height:520px}
.chart-wrap canvas{width:100%!important;height:100%!important}

.badge{
  display:inline-block;background:#f3f4f6;border:1px solid var(--border);
  border-radius:999px;padding:4px 8px;margin:2px 4px;font-size:12px
}

/* 右上：KPI 摘要 */
.kpi{
  display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:8px;font-size:13px
}
.kpi .blk{border:1px dashed var(--border);border-radius:8px;padding:8px;line-height:1.35}
.kpi .title{font-weight:700;margin-bottom:4px}
.kpi .item{white-space:nowrap}

/* 右上：交易明細表（單行、不換行、可捲動） */
.table-scroller{border:1px solid var(--border);border-radius:8px;overflow:auto;max-height:280px;background:#fff}
table{border-collapse:collapse;width:max-content;min-width:100%}
th,td{border-bottom:1px solid var(--border);padding:6px 8px;text-align:center;white-space:nowrap;font-size:13px}
thead th{background:#fafafa;font-weight:700;position:sticky;top:0;z-index:1}

/* 下方：彙總結果（每行一檔，橫向可拖動） */
.summary{border:1px solid var(--border);border-radius:12px;overflow:auto;background:#fff}
.summary table{min-width:1100px}
.summary tr.is-active{background:#eef2ff}

/* 參數與 KPI 小行 */
.compact-line{border:1px solid var(--border);border-radius:8px;padding:8px;font-size:13px;line-height:1.4;background:#fff}

/* 單檔：參數列 */
#paramLine{display:flex;flex-wrap:wrap;gap:6px;margin:6px 0}
#paramLine .badge{background:#111;color:#fff;border-color:#111}

/* 小工具 */
.flash{animation:flash .5s}
@keyframes flash{0%{filter:brightness(1)}50%{filter:brightness(1.7)}100%{filter:brightness(1)}}

.hidden{display:none}

:root{
  --bg:#f5f6f8; --card:#fff; --border:#e5e7eb;
  --txt:#111827; --muted:#6b7280; --primary:#2563eb; --primary-2:#1e40af;
}

*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);color:var(--txt);
  font-family:system-ui,-apple-system,"Segoe UI",Roboto,"PingFang TC","Noto Sans TC",sans-serif}

header{max-width:1200px;margin:12px auto 0;display:flex;gap:.75rem;align-items:center;padding:0 12px}
h1{font-size:22px;margin:0;flex:1}
.btn{border:0;border-radius:8px;padding:.55rem .9rem;cursor:pointer}
.btn.primary{background:var(--primary);color:#fff}
.btn.primary:hover{background:var(--primary-2)}
.btn.ghost{background:#eef2ff;color:#1e3a8a}

.container{max-width:1200px;margin:10px auto;padding:0 12px}

/* 卡片 */
.card{background:var(--card);border:1px solid var(--border);border-radius:10px}
.card.pad{padding:12px}

/* 單檔：圖表 */
.chart-wrap{height:540px}
canvas{width:100%!important;height:100%!important}

/* 表格共用 */
.table{width:100%;border-collapse:collapse;font-size:13px}
.table th,.table td{border-bottom:1px solid var(--border);padding:.45rem .5rem;text-align:center;white-space:nowrap}
.table thead th{background:#f9fafb;font-weight:600}
.table tbody tr:nth-child(even){background:#fafafa}
.table-scroll-x{overflow:auto}

/* KPI 簡行 */
.kpi-line{display:flex;gap:10px;flex-wrap:wrap;font-size:13px;color:#374151}
.kpi-line .chip{background:#f3f4f6;border:1px solid var(--border);border-radius:999px;padding:4px 8px}

/* 多檔版 layout */
.grid-2{display:grid;grid-template-columns:1fr 420px;gap:12px}
.box{background:var(--card);border:1px solid var(--border);border-radius:10px}
.box.pad{padding:10px}
.right-col{display:flex;flex-direction:column;gap:12px}
.right-col .panel{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:10px}
.right-col .panel h3{margin:0 0 6px;font-size:15px}
.summary-line{font-size:13px;line-height:1.45}
.param-row{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:6px}
.param-row .pill{padding:3px 8px;border-radius:999px;background:#eef2ff;color:#1e3a8a;border:1px solid #e0e7ff}
.trades{height:260px;overflow:auto;border:1px solid var(--border);border-radius:8px}

/* 置頂工具列 */
.tools{display:flex;gap:8px;justify-content:flex-end;margin-bottom:8px}

/* 彙總：每檔一行、可排序 */
#agg {margin-top:14px}
#agg .help{color:var(--muted);font-size:12px;margin-top:6px}
#agg-table th.sortable{cursor:pointer}
#agg-table th.sortable:hover{color:var(--primary)}

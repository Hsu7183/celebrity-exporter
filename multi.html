<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <title>三劍客台指期策略分析（批量版）</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
  <header class="container">
    <h1>三劍客台指期策略分析（批量版）</h1>
    <div style="display:flex;gap:8px">
      <label class="btn">選擇多個檔案 <input id="multiInput" type="file" accept=".txt,.TF" hidden multiple></label>
      <button id="clearBtn" class="btn secondary">清空結果</button>
    </div>
  </header>

  <div class="container row row-2">
    <!-- 左：圖 -->
    <div class="card chart-wrap"><canvas id="mChart"></canvas></div>

    <!-- 右：參數＋KPI＋交易明細 -->
    <div class="card" style="display:flex;flex-direction:column;gap:10px;max-height:520px;overflow:auto;">
      <div id="mParam" class="compact-line"></div>
      <div id="mKPI" class="compact-line"></div>

      <div class="table-scroller">
        <table id="mTrades">
          <thead><tr id="mHead"></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="container">
    <h2>彙總結果（每行一檔，橫向可捲動）</h2>
    <div class="summary">
      <table id="sumTbl">
        <thead>
          <tr>
            <th data-k="name">時間</th>
            <th data-k="param">參數</th>
            <th data-k="trades">交易數</th>
            <th data-k="win">勝率</th>
            <th data-k="gain">累積獲利</th>
            <th data-k="pf">Profit Factor</th>
            <th data-k="best">單日最大獲利</th>
            <th data-k="dd">區間最大回撤</th>
            <th data-k="lwin">多-勝率</th>
            <th data-k="lgain">多-累積獲利</th>
            <th data-k="swin">空-勝率</th>
            <th data-k="sgain">空-累積獲利</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <div class="muted" style="margin-top:6px">
      TXT 第一行若為參數會自動辨識；點擊表頭可排序；點擊某行會同步更新上方圖表/KPI/交易明細。
    </div>
  </div>

  <script src="multi.js"></script>
</body>
</html>
